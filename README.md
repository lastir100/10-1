# Домашнее задание к занятию «Базы данных, их типы» - Минин Александр


### Задание 1. СУБД

### Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать 
правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для
каждой предметной области. 

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему? 
 
1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков.
СУБД должна гарантировать целостность и чёткую структуру данных.

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы? 

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к 
маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? 
СУБД должны быть гибкими и быстрыми.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу 
и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это 
реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов 
по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать
со связями.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД 
логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

*Приведите ответ в свободной форме.*

### Решение 1.
1.1 Для задач бюджетирования и формирования финансовых отчетов лучше всего подойдет реляционная СУБД (например, PostgreSQL или MySQL). Эти системы обеспечивают высокую целостность данных и поддерживают сложные запросы, что важно для анализа и прогнозирования рисков. Реляционные базы данных позволяют создавать четкие структуры данных с использованием таблиц и связей между ними.

1.1* Для ускорения работы с хешированием можно использовать API, такие как Redis или Memcached. Эти системы кэширования позволяют значительно сократить время доступа к данным, что особенно полезно при работе с большими объемами информации.

1.2 Для лендингов и CRM лучше использовать NoSQL СУБД. Эти базы данных обеспечивают гибкость в структуре данных и высокую скорость обработки запросов, что критично для работы с динамическими данными.

1.3 Для создания базы данных по корпоративным нормам и правилам также подойдет реляционная СУБД. Она обеспечит простую и понятную структуру, что важно для хранения обучающих материалов и норм.

1.3* Да, можно использовать ту же реляционную СУБД, что и для бюджетирования. Реализовать с помощью отдельных базы данных.

1.4 Для задач логистики, связанных с формированием маршрутов и распределением курьеров, лучше всего подойдет графовая NoSQL СУБД. Она оптимизирована для работы со связями и позволяет эффективно решать задачи маршрутизации.

---

### Задание 2. Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы 
транзакция завершилась успешно. Ориентируйтесь на шесть действий.

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

*Приведите ответ в свободной форме.*

### Решение 2.

1. Инициация транзакции пользователем. Пользователь выбирает способ пополнения (например, через сайт, мобильное приложение, банкомат, терминал или USSD-запрос), указывает:
- номер телефона,
- сумму пополнения,
- источник средств (например, банковская карта).

2. Проверка корректности данных. Система проверяет:
- правильность номера телефона (формат, существование в сети оператора),
- допустимость суммы (не меньше минимума, не больше лимита),
- валидность источника оплаты (например, срок действия карты, поддерживаемые платёжные системы).

3. Авторизация и блокировка средств. Платёжная система (эквайер/банк) запрашивает авторизацию:
- проверяет наличие средств,
- блокирует сумму на счёте пользователя,
- получает временное подтверждение транзакции.

4. Передача платёжной информации оператору связи. Сервис оплаты или платёжный шлюз отправляет данные оператору связи:
- номер телефона,
- сумму пополнения,
- уникальный идентификатор транзакции.

5. Зачисление средств оператором связи. Оператор проверяет полученные данные и:
- зачисляет сумму на баланс номера,
- фиксирует пополнение в своей биллинговой системе.

6. Завершение транзакции и уведомление.
- Платёжная система получает подтверждение от оператора и завершает платёж.
- Пользователь получает уведомление (SMS, push или на экране) о том, что баланс пополнен успешно.

Если на любом из этапов произойдёт ошибка (например, недостаточно средств, неверный номер), транзакция прерывается, средства не списываются (или возвращаются), и пользователю показывается сообщение об ошибке.

---

### Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL. 

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

*Приведите ответ в свободной форме.*

### Решение 3.
1. Строгая структура и целостность данных (ACID)
SQL-системы поддерживают транзакции с гарантией атомарности, согласованности, изолированности и надёжности (ACID), что особенно важно для:
- банковских операций,
- бухгалтерии,
- систем с высокой критичностью данных.

2. Унифицированный язык запросов (SQL)
SQL — стандартный и мощный язык запросов:
- хорошо документирован,
- понятен многим специалистам,
- легко интегрируется с BI-системами, отчётами, аналитикой.

3. Нормализация данных и предотвращение избыточности
Реляционные БД позволяют проектировать схемы с разделением логических сущностей по таблицам, уменьшая:
- дублирование информации,
- риск ошибок при изменении данных.

4. Надёжные инструменты и зрелая экосистема
SQL-СУБД существуют десятки лет, поэтому:
- имеют развитые средства резервного копирования, репликации и мониторинга,
- поддерживают тонкую настройку прав доступа,
- легко масштабируются вертикально.

5. Поддержка сложных связей между данными (JOIN)
- SQL-системы позволяют эффективно выполнять сложные выборки с объединением таблиц (JOIN, GROUP BY, HAVING), чего часто не хватает в большинстве NoSQL решений или реализовано с трудностями.

---

### Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу 
выделено 1000 машин. 

На основе какого критерия будете выбирать тип СУБД и какая модель *распределённых вычислений* 
здесь справится лучше всего и почему?

*Приведите ответ в свободной форме.*
### Решение 4.
Критерий выбора типа СУБД:

Основной критерий — способность системы горизонтально масштабироваться и обрабатывать данные параллельно.

Выбор: NoSQL (или NewSQL) системы, ориентированные на распределённые вычисления

Подходят колоночные, ключ-значение или документоориентированные СУБД.

Примеры:
- Apache Cassandra — если приоритет на записи и отказоустойчивость.
- ClickHouse — для аналитических запросов по большим объёмам данных.

Реляционные СУБД (SQL) плохо масштабируются горизонтально, поэтому они не подходят без дополнительных решений типа NewSQL (CockroachDB, TiDB).

Модель распределённых вычислений: Apache Spark

Лучшая модель для параллельной обработки больших данных на большом числе узлов.
- Умеет распределять задачи по всем 1000 узлам,
- Хранит данные в распределённой памяти, минимизируя I/O,
- Обеспечивает устойчивость к сбоям и автоматическое восстановление,


---

Задания,помеченные звёздочкой, — дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже разобраться в материале.
